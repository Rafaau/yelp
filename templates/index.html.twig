{% extends 'base.html.twig' %}
{% block body %}
    <img
        class="h-[500px] w-full object-cover object-bottom brightness-50" 
        src="{{ asset('build/images/main_1.c44d6871.jpg') }}" 
        alt="404">
    <span class="absolute z-10 text-zinc-100 text-5xl font-bold top-48 left-10">
        Connect with great local businesses
    </span>    
    <p class="text-center text-3xl font-black my-10">
        Recent Activity
    </p>
    <div class="grid grid-cols-3 gap-8 px-10 pb-10 max-w-[1300px] mx-auto">
        {% for review in reviews %}
            <a 
                href="/biz/{{ review.business.name }}-{{ location }}"
                class="w-[100%] h-[27.5rem] rounded border border-zinc-300 cursor-pointer hover:shadow-md">
                <div class="flex items-center p-4">
                    {% if review.user.userImage %}
                        <img src="{{ asset('' ~ review.user.userImage) }}" alt="404" class="w-12 h-12 rounded-full mr-2" />
                    {% else %}
                        <img src="{{ asset('/build/images/avatar_default.19e0a8ff.jpg') }}" alt="404" class="w-12 h-12 rounded-full mr-2 border" />
                    {% endif %}
                    <div>
                        <p class="text-lg font-bold">{{ review.user.username }}</p>
                        <p class="text-sm">Wrote a review</p>
                    </div>
                </div>
                {% if review.images|length %}
                    <img src="{{ asset('' ~ review.images[0]) }}" alt="404" class="w-full object-cover h-[30%] my-2" />
                {% endif %}
                <div class="px-8 py-2">
                    <p class="text-lg font-bold text-cyan-700">{{ review.business.name }}</p>
                    <div class="flex py-2">
                        {% for i in 1..5 %}
                            {% set color = 
                                review.stars >= 9 ? 'rgba(251,67,60,1)' :
                                review.stars >= 7 ? 'rgba(255,100,61,1)' :
                                review.stars >= 5 ? 'rgba(255,135,66,1)' :
                                review.stars >= 3 ? 'rgba(255,173,72,1)' :
                                review.stars >= 1 ? 'rgba(255,204,75,1)' : 
                                '#BBBAC0'
                            %}
                            <svg width="20" height="20" viewBox="0 0 20 20" class="mr-1">
                                <path 
                                    fill="{{ review.stars >= i * 2 - 1 ? color :
                                             '#BBBAC0' }}" 
                                    opacity="1" d="M0 4C0 1.79086 1.79086 0 4 0H10V20H4C1.79086 20 0 18.2091 0 16V4Z">
                                </path>
                                <path 
                                    fill="{{ review.stars >= i * 2 ? color :
                                             '#BBBAC0' }}" 
                                    opacity="1" d="M20 4C20 1.79086 18.2091 0 16 0H10V20H16C18.2091 20 20 18.2091 20 16V4Z">
                                </path>
                                <path fill="white" fill-rule="evenodd" clip-rule="evenodd" d="M10 13.3736L12.5949 14.7111C12.7378 14.7848 12.9006 14.8106 13.0593 14.7847C13.4681 14.718 13.7454 14.3325 13.6787 13.9237L13.2085 11.0425L15.2824 8.98796C15.3967 8.8748 15.4715 8.72792 15.4959 8.569C15.5588 8.15958 15.2779 7.77672 14.8685 7.71384L11.983 7.2707L10.6699 4.66338C10.5975 4.51978 10.481 4.40322 10.3374 4.33089C9.96742 4.14458 9.51648 4.29344 9.33017 4.66338L8.01705 7.2707L5.13157 7.71384C4.97265 7.73825 4.82577 7.81309 4.71261 7.92731C4.42109 8.22158 4.42332 8.69645 4.71759 8.98796L6.79152 11.0425L6.32131 13.9237C6.29541 14.0824 6.3212 14.2452 6.39486 14.3881C6.58464 14.7563 7.03696 14.9009 7.40514 14.7111L10 13.3736Z"></path>
                            </svg>
                        {% endfor %}
                    </div>
                    <p class="text-sm dots">{{ review.content }}</p>
                    <div class="flex space-x-2 text-zinc-500 font-semibold text-sm pt-4 mt-3 border-t">
                        <button 
                            class="py-1 px-2 border border-zinc-400 rounded flex items-center">
                            <i class="fa-regular fa-lightbulb mr-2"></i>
                            Useful
                            <span class="font-roboto-light ml-2 text-xs">
                                {{ review.reactions['useful'] }}
                            </span>
                        </button>
                        <button 
                            class="py-1 px-2 border border-zinc-400 rounded flex items-center">
                            <i class="fa-regular fa-face-laugh-squint mr-2"></i>
                            Funny
                            <span class="font-roboto-light ml-2 text-xs">
                                {{ review.reactions['funny'] }}
                            </span>
                        </button>
                        <button 
                            class="py-1 px-2 border border-zinc-400 rounded flex items-center">
                            <i class="fa-regular fa-face-grin-wink mr-2"></i>
                            Cool
                            <span class="font-roboto-light ml-2 text-xs">
                                {{ review.reactions['cool'] }}
                            </span>
                        </button>
                    </div>
                </div>
            </a>
        {% endfor %}
    </div>
    <p class="text-center text-3xl font-black py-10 border-t">
        Categories
    </p>
    <div 
        x-data="{ show: false }"
        class="max-w-[1300px] mx-auto">
        <div class="grid grid-cols-4 gap-8 px-10 pb-10">
            <a 
                href="{{ path('search', { 'cflt': 'restaurants', 'find_loc': location }) }}"
                class="w-[100%] py-[6vw] text-center rounded border border-zinc-300 cursor-pointer hover:shadow-md">
                <img class="m-auto" src="https://s3-media0.fl.yelpcdn.com/assets/srv0/yelp_design_cdn/8bc05b287157/assets/img/svg_illustrations/40x40_food_v2.svg" alt="404" />
                Restaurants
            </a>
            <a
                href="{{ path('search', { 'cflt': 'shopping', 'find_loc': location }) }}"
                class="w-[100%] py-[6vw] text-center rounded border border-zinc-300 cursor-pointer hover:shadow-md">
                <img class="m-auto" src="https://s3-media0.fl.yelpcdn.com/assets/srv0/yelp_design_cdn/488aeb87ef6e/assets/img/svg_illustrations/40x40_gift_shops_v2.svg" alt="404" />
                Shopping
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'nightlife', 'find_loc': location }) }}"
                class="w-[100%] py-[6vw] text-center rounded border border-zinc-300 cursor-pointer hover:shadow-md">
                <img class="m-auto" src="https://s3-media0.fl.yelpcdn.com/assets/srv0/yelp_design_cdn/1397897c21a5/assets/img/svg_illustrations/40x40_new_v2.svg" alt="404" />
                Nightlife
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'sports & leisure', 'find_loc': location }) }}"
                class="w-[100%] py-[6vw] text-center rounded border border-zinc-300 cursor-pointer hover:shadow-md">
                <img class="m-auto" src="https://s3-media0.fl.yelpcdn.com/assets/srv0/yelp_design_cdn/0372f8e93aa9/assets/img/svg_illustrations/40x40_set_objective_v2.svg" alt="404" />
                Sports & Leisure
            </a>  
            <a 
                href="{{ path('search', { 'cflt': 'beauty & spas', 'find_loc': location }) }}"
                class="w-[100%] py-[6vw] text-center rounded border border-zinc-300 cursor-pointer hover:shadow-md">
                <img class="m-auto" src="https://s3-media0.fl.yelpcdn.com/assets/srv0/yelp_design_cdn/5bd5d2648742/assets/img/svg_illustrations/40x40_barbers_v2.svg" alt="404" />
                Beauty & Spas
            </a>
            <a
                href="{{ path('search', { 'cflt': 'car & motorcycle', 'find_loc': location }) }}" 
                class="w-[100%] py-[6vw] text-center rounded border border-zinc-300 cursor-pointer hover:shadow-md">
                <img class="m-auto" src="https://s3-media0.fl.yelpcdn.com/assets/srv0/yelp_design_cdn/5967f38fe621/assets/img/svg_illustrations/40x40_auto_v2.svg" alt="404" />
                Car & Motorcycle
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'home services', 'find_loc': location }) }}"
                class="w-[100%] py-[6vw] text-center rounded border border-zinc-300 cursor-pointer hover:shadow-md">
                <img class="m-auto" src="https://s3-media0.fl.yelpcdn.com/assets/srv0/yelp_design_cdn/7fc312973cf8/assets/img/svg_illustrations/40x40_home_services_v2.svg" alt="404" />
                Home Services
            </a>
            <a 
                @click="show = !show" :class="{ 'bg-zinc-200': show, 'bg-zinc-100': !show }" 
                class="w-[100%] py-[6vw] text-center rounded border border-zinc-300 cursor-pointer hover:shadow-md">
                <img class="m-auto" src="https://s3-media0.fl.yelpcdn.com/assets/public/40x40_more_v2.yji-961fdce2fd036f85fb01.svg" alt="404" />
                More
            </a>                
        </div>
        <div 
            x-show="show"
            class="grid grid-cols-4 px-10 gap-8 mb-10 text-zinc-600">
            <a 
                href="{{ path('search', { 'cflt': 'coffee & Tea Shops', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-mug-hot mr-1"></i>
                <span class="hover:underline">Coffee & Tea Shops</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'food', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-utensils mr-1"></i>
                <span class="hover:underline">Food</span>
            </a>
            <a
                href="{{ path('search', { 'cflt': 'arts & Entertainment', 'find_loc': location }) }}" 
                class="cursor-pointer">
                <i class="fa-solid fa-palette mr-1"></i>
                <span class="hover:underline">Arts & Entertainment</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'health & Medical', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-people-group mr-1"></i>
                <span class="hover:underline">Health & Medical</span>
            </a>
            <a
                href="{{ path('search', { 'cflt': 'professional Services', 'find_loc': location }) }}" 
                class="cursor-pointer">
                <i class="fa-solid fa-shield-halved mr-1"></i>
                <span class="hover:underline">Professional Services</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'pets', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-paw mr-1"></i>
                <span class="hover:underline">Pets</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'property', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-house mr-1"></i>
                <span class="hover:underline">Property</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'hotel & Travel', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-hotel mr-1"></i>
                <span class="hover:underline">Hotel & Travel</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'local Services', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-map-location-dot mr-1"></i>
                <span class="hover:underline">Local Services</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'event Planning', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-calendar-day mr-1"></i>
                <span class="hover:underline">Event Planning</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'government', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-building mr-1"></i>
                <span class="hover:underline">Government</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'financial Services', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-chart-line mr-1"></i>
                <span class="hover:underline">Financial Services</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'education', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-graduation-cap mr-1"></i>
                <span class="hover:underline">Education</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'religious Organisations', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-hands-praying mr-1"></i>
                <span class="hover:underline">Religious Organisations</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'local Flavour', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-seedling mr-1"></i>
                <span class="hover:underline">Local Flavour</span>
            </a>
            <a 
                href="{{ path('search', { 'cflt': 'mass Media', 'find_loc': location }) }}"
                class="cursor-pointer">
                <i class="fa-solid fa-photo-film mr-1"></i>
                <span class="hover:underline">Mass Media</span>
            </a>                                                               
        </div>
    </div>
{% endblock %}